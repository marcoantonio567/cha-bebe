{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chá de Bebê</title>
    <link rel="stylesheet" href="{% static 'css/ver_itens.css'%}">
  </head>
  <body>
    <header>
      <h1>Nosso Chá de Bebê</h1>
      <p>Eu, mamãe e papai convidamos você para o meu Chá</p>
      <p>
        Peço desculpas por não poder participar, é que ando muito ocupada
        crescendo, engordando e chutando a mamãe
      </p>
      <p>Venha festejar com a gente!</p>
    </header>
    <main>
      <section class="informacoes">
        <h2>Informações</h2>
        <ul>
          <li>Data: 15/01/2019</li>
          <li>Hora: 15h</li>
          <li>Local: Rua xxxxxx</li>
        </ul>
      </section>
      <section class="presentes">
        <h2>Presentes</h2>
        <p>
            Sua presença é o nosso maior presente, mas se quiser contribuir com algo, aqui estão algumas sugestões:
        </p>
    
        <ul>
            {% for item in itens %}
            <li>
                <input type="checkbox" name="presentes" id="presente{{ item.id }}" value="{{ item.id }}" />
                <label for="presente{{ item.id }}">{{ item.nome }}</label>
                <span class="quantidade">Quantidade: {{ item.quantidade }}</span>
            </li>
            {% endfor %}
        </ul>
    </section>
    

    <section class="confirmacao">
      <h2>Confirmação</h2>
      <p>Por favor, confirme sua presença até o dia 10/01/2019.</p>
      <form action="/" method="POST">
          {% csrf_token %}
          <label for="nome">Nome:</label>
          <input type="text" id="nome" name="nome" />
          <label for="email">E-mail:</label>
          <input type="email" id="email" name="email" />
          <input type="hidden" id="pedidos" name="pedidos" value="" /> <!-- Campo oculto para armazenar os IDs dos pedidos -->
          <button type="submit" onclick="getSelectedItems()">Confirmar</button>
      </form>
  </section>
  <script>
    function getSelectedItems() {
        var selectedItems = document.querySelectorAll('input[name="presentes"]:checked');
        var selectedIds = [];
        selectedItems.forEach(function(item) {
            selectedIds.push(item.value);
        });
        document.getElementById('pedidos').value = selectedIds.join(',');
        return true; // Permite que o formulário seja enviado após a execução da função
    }
</script>

    </main>
  </body>
</html>
